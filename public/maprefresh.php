<?php 

//KIAD GATES
$KIADGates = array(
 'B14'  => array ( 'name' =>  'B14' ,  'lat' => 38.94869, 'lon' => -77.444161, 'radius' => 23),
 'B16'  => array ( 'name' =>  'B16' ,  'lat' => 38.947738, 'lon' => -77.444634, 'radius' => 23),
 'B20'  => array ( 'name' =>  'B20' ,  'lat' => 38.947756, 'lon' => -77.44667, 'radius' => 18),
 'B22'  => array ( 'name' =>  'B22' ,  'lat' => 38.947756, 'lon' => -77.44667, 'radius' => 23),
 'B24'  => array ( 'name' =>  'B24' ,  'lat' => 38.947756, 'lon' => -77.44667, 'radius' => 18),
 'B26'  => array ( 'name' =>  'B26' ,  'lat' => 38.947756, 'lon' => -77.44667, 'radius' => 18),
 'B32'  => array ( 'name' =>  'B32' ,  'lat' => 38.947756, 'lon' => -77.44667, 'radius' => 18),
 'B38'  => array ( 'name' =>  'B38' ,  'lat' => 38.947756, 'lon' => -77.44667, 'radius' => 23),
 'B40'  => array ( 'name' =>  'B40' ,  'lat' => 38.947784, 'lon' => -77.449742, 'radius' => 18),
 'B42'  => array ( 'name' =>  'B42' ,  'lat' => 38.947784, 'lon' => -77.449742, 'radius' => 23),
 'B44'  => array ( 'name' =>  'B44' ,  'lat' => 38.947784, 'lon' => -77.449742, 'radius' => 18),
 'B46'  => array ( 'name' =>  'B46' ,  'lat' => 38.947784, 'lon' => -77.449742, 'radius' => 23),
 'B48'  => array ( 'name' =>  'B48' ,  'lat' => 38.947784, 'lon' => -77.449742, 'radius' => 18),
 'B50'  => array ( 'name' =>  'B50' ,  'lat' => 38.947784, 'lon' => -77.449742, 'radius' => 18),
 'B52'  => array ( 'name' =>  'B52' ,  'lat' => 38.947955, 'lon' => -77.452609, 'radius' => 23),
 'C1'  => array ( 'name' =>  'C1' ,  'lat' => 38.946145, 'lon' => -77.440833, 'radius' => 36),
 'C11'  => array ( 'name' =>  'C11' ,  'lat' => 38.946173, 'lon' => -77.444111, 'radius' => 23),
 'C12'  => array ( 'name' =>  'C12' ,  'lat' => 38.944506, 'lon' => -77.442612, 'radius' => 18),
 'C14'  => array ( 'name' =>  'C14' ,  'lat' => 38.944506, 'lon' => -77.442612, 'radius' => 23),
 'C16'  => array ( 'name' =>  'C16' ,  'lat' => 38.944515, 'lon' => -77.443704, 'radius' => 23),
 'C17'  => array ( 'name' =>  'C17' ,  'lat' => 38.946177, 'lon' => -77.444665, 'radius' => 23),
 'C18'  => array ( 'name' =>  'C18' ,  'lat' => 38.944522, 'lon' => -77.444492, 'radius' => 18),
 'C19'  => array ( 'name' =>  'C19' ,  'lat' => 38.946182, 'lon' => -77.445289, 'radius' => 18),
 'C2'  => array ( 'name' =>  'C2' ,  'lat' => 38.945326, 'lon' => -77.440355, 'radius' => 36),
 'C20'  => array ( 'name' =>  'C20' ,  'lat' => 38.944522, 'lon' => -77.444492, 'radius' => 23),
 'C22'  => array ( 'name' =>  'C22' ,  'lat' => 38.944539, 'lon' => -77.446323, 'radius' => 18),
 'C23'  => array ( 'name' =>  'C23' ,  'lat' => 38.946185, 'lon' => -77.445776, 'radius' => 18),
 'C24'  => array ( 'name' =>  'C24' ,  'lat' => 38.944539, 'lon' => -77.446323, 'radius' => 18),
 'C26'  => array ( 'name' =>  'C26' ,  'lat' => 38.944539, 'lon' => -77.446323, 'radius' => 23),
 'C27'  => array ( 'name' =>  'C27' ,  'lat' => 38.946192, 'lon' => -77.446412, 'radius' => 23),
 'C28'  => array ( 'name' =>  'C28' ,  'lat' => 38.944539, 'lon' => -77.446323, 'radius' => 23),
 'C3'  => array ( 'name' =>  'C3' ,  'lat' => 38.946152, 'lon' => -77.441644, 'radius' => 36),
 'C30'  => array ( 'name' =>  'C30' ,  'lat' => 38.944539, 'lon' => -77.446323, 'radius' => 18),
 'C4'  => array ( 'name' =>  'C4' ,  'lat' => 38.944498, 'lon' => -77.441536, 'radius' => 36),
 'C5'  => array ( 'name' =>  'C5' ,  'lat' => 38.946163, 'lon' => -77.442847, 'radius' => 18),
 'C6'  => array ( 'name' =>  'C6' ,  'lat' => 38.944506, 'lon' => -77.442612, 'radius' => 18),
 'C7'  => array ( 'name' =>  'C7' ,  'lat' => 38.946163, 'lon' => -77.442847, 'radius' => 18),
 'C9'  => array ( 'name' =>  'C9' ,  'lat' => 38.94617, 'lon' => -77.443762, 'radius' => 18),
 'D1'  => array ( 'name' =>  'D1' ,  'lat' => 38.946209, 'lon' => -77.4479, 'radius' => 18),
 'D10'  => array ( 'name' =>  'D10' ,  'lat' => 38.944575, 'lon' => -77.449758, 'radius' => 18),
 'D11'  => array ( 'name' =>  'D11' ,  'lat' => 38.946241, 'lon' => -77.451854, 'radius' => 23),
 'D12'  => array ( 'name' =>  'D12' ,  'lat' => 38.944575, 'lon' => -77.449758, 'radius' => 23),
 'D14'  => array ( 'name' =>  'D14' ,  'lat' => 38.944575, 'lon' => -77.449758, 'radius' => 18),
 'D15'  => array ( 'name' =>  'D15' ,  'lat' => 38.946241, 'lon' => -77.451854, 'radius' => 18),
 'D16'  => array ( 'name' =>  'D16' ,  'lat' => 38.944602, 'lon' => -77.452705, 'radius' => 18),
 'D18'  => array ( 'name' =>  'D18' ,  'lat' => 38.944602, 'lon' => -77.452705, 'radius' => 23),
 'D19'  => array ( 'name' =>  'D19' ,  'lat' => 38.946249, 'lon' => -77.452728, 'radius' => 23),
 'D2'  => array ( 'name' =>  'D2' ,  'lat' => 38.944575, 'lon' => -77.449758, 'radius' => 23),
 'D20'  => array ( 'name' =>  'D20' ,  'lat' => 38.944602, 'lon' => -77.452705, 'radius' => 18),
 'D21'  => array ( 'name' =>  'D21' ,  'lat' => 38.946255, 'lon' => -77.453396, 'radius' => 23),
 'D23'  => array ( 'name' =>  'D23' ,  'lat' => 38.946264, 'lon' => -77.454254, 'radius' => 36),
 'D24'  => array ( 'name' =>  'D24' ,  'lat' => 38.944602, 'lon' => -77.452705, 'radius' => 23),
 'D26'  => array ( 'name' =>  'D26' ,  'lat' => 38.944602, 'lon' => -77.452705, 'radius' => 18),
 'D29'  => array ( 'name' =>  'D29' ,  'lat' => 38.94627, 'lon' => -77.454894, 'radius' => 36),
 'D3'  => array ( 'name' =>  'D3' ,  'lat' => 38.946216, 'lon' => -77.448655, 'radius' => 18),
 'D30'  => array ( 'name' =>  'D30' ,  'lat' => 38.944616, 'lon' => -77.454279, 'radius' => 23),
 'D32'  => array ( 'name' =>  'D32' ,  'lat' => 38.944623, 'lon' => -77.455068, 'radius' => 36),
 'D4'  => array ( 'name' =>  'D4' ,  'lat' => 38.944575, 'lon' => -77.449758, 'radius' => 23),
 'D5'  => array ( 'name' =>  'D5' ,  'lat' => 38.946222, 'lon' => -77.449449, 'radius' => 18),
 'D6'  => array ( 'name' =>  'D6' ,  'lat' => 38.944575, 'lon' => -77.449758, 'radius' => 18),
 'D7'  => array ( 'name' =>  'D7' ,  'lat' => 38.946228, 'lon' => -77.450266, 'radius' => 23),
 'D8'  => array ( 'name' =>  'D8' ,  'lat' => 38.944575, 'lon' => -77.449758, 'radius' => 23),
 'G10'  => array ( 'name' =>  'G10' ,  'lat' => 38.943712, 'lon' => -77.450093, 'radius' => 18),
 'G100'  => array ( 'name' =>  'G100' ,  'lat' => 38.948689, 'lon' => -77.440308, 'radius' => 18),
 'G11'  => array ( 'name' =>  'G11' ,  'lat' => 38.943712, 'lon' => -77.450093, 'radius' => 18),
 'G12'  => array ( 'name' =>  'G12' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G13'  => array ( 'name' =>  'G13' ,  'lat' => 38.94183, 'lon' => -77.452042, 'radius' => 18),
 'G14'  => array ( 'name' =>  'G14' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G15'  => array ( 'name' =>  'G15' ,  'lat' => 38.94183, 'lon' => -77.452042, 'radius' => 18),
 'G16'  => array ( 'name' =>  'G16' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G17'  => array ( 'name' =>  'G17' ,  'lat' => 38.94183, 'lon' => -77.452042, 'radius' => 18),
 'G19'  => array ( 'name' =>  'G19' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G20'  => array ( 'name' =>  'G20' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G21'  => array ( 'name' =>  'G21' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G22'  => array ( 'name' =>  'G22' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G23'  => array ( 'name' =>  'G23' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G24'  => array ( 'name' =>  'G24' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G25'  => array ( 'name' =>  'G25' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G26'  => array ( 'name' =>  'G26' ,  'lat' => 38.941853, 'lon' => -77.455097, 'radius' => 18),
 'G3'  => array ( 'name' =>  'G3' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 36),
 'G81'  => array ( 'name' =>  'G81' ,  'lat' => 38.948689, 'lon' => -77.440308, 'radius' => 18),
 'G82'  => array ( 'name' =>  'G82' ,  'lat' => 38.948689, 'lon' => -77.440308, 'radius' => 18),
 'G83'  => array ( 'name' =>  'G83' ,  'lat' => 38.947643, 'lon' => -77.44124, 'radius' => 18),
 'G84'  => array ( 'name' =>  'G84' ,  'lat' => 38.94869, 'lon' => -77.444161, 'radius' => 18),
 'G85'  => array ( 'name' =>  'G85' ,  'lat' => 38.947653, 'lon' => -77.442826, 'radius' => 18),
 'G86'  => array ( 'name' =>  'G86' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 18),
 'G87'  => array ( 'name' =>  'G87' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 36),
 'G88'  => array ( 'name' =>  'G88' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 36),
 'G89'  => array ( 'name' =>  'G89' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 23),
 'G90'  => array ( 'name' =>  'G90' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 18),
 'G91'  => array ( 'name' =>  'G91' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 23),
 'G92'  => array ( 'name' =>  'G92' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 18),
 'G93'  => array ( 'name' =>  'G93' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 23),
 'G94'  => array ( 'name' =>  'G94' ,  'lat' => 38.949679, 'lon' => -77.453229, 'radius' => 23),
 'G95'  => array ( 'name' =>  'G95' ,  'lat' => 38.949682, 'lon' => -77.448458, 'radius' => 23),
 'G96'  => array ( 'name' =>  'G96' ,  'lat' => 38.949742, 'lon' => -77.442222, 'radius' => 18),
 'G97'  => array ( 'name' =>  'G97' ,  'lat' => 38.949742, 'lon' => -77.442222, 'radius' => 18),
 'G98'  => array ( 'name' =>  'G98' ,  'lat' => 38.949742, 'lon' => -77.442222, 'radius' => 18),
 'G99'  => array ( 'name' =>  'G99' ,  'lat' => 38.949742, 'lon' => -77.442222, 'radius' => 18),
 'Spot_1'  => array ( 'name' =>  'Spot_1' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_10'  => array ( 'name' =>  'Spot_10' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_11'  => array ( 'name' =>  'Spot_11' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_12'  => array ( 'name' =>  'Spot_12' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_13'  => array ( 'name' =>  'Spot_13' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_14'  => array ( 'name' =>  'Spot_14' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_15'  => array ( 'name' =>  'Spot_15' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_16'  => array ( 'name' =>  'Spot_16' ,  'lat' => 38.96767, 'lon' => -77.454572, 'radius' => 10),
 'Spot_17'  => array ( 'name' =>  'Spot_17' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_18'  => array ( 'name' =>  'Spot_18' ,  'lat' => 38.967592, 'lon' => -77.454125, 'radius' => 10),
 'Spot_19'  => array ( 'name' =>  'Spot_19' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_2'  => array ( 'name' =>  'Spot_2' ,  'lat' => 38.96758, 'lon' => -77.453073, 'radius' => 18),
 'Spot_20'  => array ( 'name' =>  'Spot_20' ,  'lat' => 38.967589, 'lon' => -77.453868, 'radius' => 10),
 'Spot_21'  => array ( 'name' =>  'Spot_21' ,  'lat' => 38.967586, 'lon' => -77.453603, 'radius' => 10),
 'Spot_22'  => array ( 'name' =>  'Spot_22' ,  'lat' => 38.967586, 'lon' => -77.4536, 'radius' => 10),
 'Spot_23'  => array ( 'name' =>  'Spot_23' ,  'lat' => 38.967583, 'lon' => -77.453352, 'radius' => 10),
 'Spot_24'  => array ( 'name' =>  'Spot_24' ,  'lat' => 38.967583, 'lon' => -77.453344, 'radius' => 10),
 'Spot_25'  => array ( 'name' =>  'Spot_25' ,  'lat' => 38.96758, 'lon' => -77.453084, 'radius' => 10),
 'Spot_26'  => array ( 'name' =>  'Spot_26' ,  'lat' => 38.96758, 'lon' => -77.453075, 'radius' => 10),
 'Spot_27'  => array ( 'name' =>  'Spot_27' ,  'lat' => 38.967577, 'lon' => -77.452827, 'radius' => 10),
 'Spot_28'  => array ( 'name' =>  'Spot_28' ,  'lat' => 38.967577, 'lon' => -77.452825, 'radius' => 10),
 'Spot_29'  => array ( 'name' =>  'Spot_29' ,  'lat' => 38.967574, 'lon' => -77.452576, 'radius' => 10),
 'Spot_3'  => array ( 'name' =>  'Spot_3' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_30'  => array ( 'name' =>  'Spot_30' ,  'lat' => 38.967574, 'lon' => -77.452568, 'radius' => 10),
 'Spot_31'  => array ( 'name' =>  'Spot_31' ,  'lat' => 38.967572, 'lon' => -77.452322, 'radius' => 10),
 'Spot_32'  => array ( 'name' =>  'Spot_32' ,  'lat' => 38.967572, 'lon' => -77.452292, 'radius' => 10),
 'Spot_33'  => array ( 'name' =>  'Spot_33' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_34'  => array ( 'name' =>  'Spot_34' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_35'  => array ( 'name' =>  'Spot_35' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'Spot_36'  => array ( 'name' =>  'Spot_36' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_37'  => array ( 'name' =>  'Spot_37' ,  'lat' => 38.96767, 'lon' => -77.454572, 'radius' => 14),
 'Spot_38'  => array ( 'name' =>  'Spot_38' ,  'lat' => 38.967567, 'lon' => -77.45447, 'radius' => 10),
 'Spot_39'  => array ( 'name' =>  'Spot_39' ,  'lat' => 38.967592, 'lon' => -77.454137, 'radius' => 10),
 'Spot_4'  => array ( 'name' =>  'Spot_4' ,  'lat' => 38.967575, 'lon' => -77.452627, 'radius' => 18),
 'Spot_40'  => array ( 'name' =>  'Spot_40' ,  'lat' => 38.967563, 'lon' => -77.454129, 'radius' => 14),
 'Spot_41'  => array ( 'name' =>  'Spot_41' ,  'lat' => 38.967588, 'lon' => -77.453825, 'radius' => 14),
 'Spot_42'  => array ( 'name' =>  'Spot_42' ,  'lat' => 38.96756, 'lon' => -77.453811, 'radius' => 10),
 'Spot_43'  => array ( 'name' =>  'Spot_43' ,  'lat' => 38.967585, 'lon' => -77.453501, 'radius' => 10),
 'Spot_44'  => array ( 'name' =>  'Spot_44' ,  'lat' => 38.967556, 'lon' => -77.453487, 'radius' => 14),
 'Spot_45'  => array ( 'name' =>  'Spot_45' ,  'lat' => 38.967581, 'lon' => -77.453183, 'radius' => 14),
 'Spot_46'  => array ( 'name' =>  'Spot_46' ,  'lat' => 38.967552, 'lon' => -77.453174, 'radius' => 10),
 'Spot_47'  => array ( 'name' =>  'Spot_47' ,  'lat' => 38.967577, 'lon' => -77.452848, 'radius' => 10),
 'Spot_48'  => array ( 'name' =>  'Spot_48' ,  'lat' => 38.967549, 'lon' => -77.45285, 'radius' => 14),
 'Spot_49'  => array ( 'name' =>  'Spot_49' ,  'lat' => 38.967573, 'lon' => -77.452501, 'radius' => 14),
 'Spot_5'  => array ( 'name' =>  'Spot_5' ,  'lat' => 38.969628, 'lon' => -77.449694, 'radius' => 18),
 'Spot_50'  => array ( 'name' =>  'Spot_50' ,  'lat' => 38.967545, 'lon' => -77.452499, 'radius' => 10),
 'Spot_51'  => array ( 'name' =>  'Spot_51' ,  'lat' => 38.964417, 'lon' => -77.454308, 'radius' => 50),
 'Spot_52'  => array ( 'name' =>  'Spot_52' ,  'lat' => 38.954426, 'lon' => -77.453962, 'radius' => 50),
 'Spot_53'  => array ( 'name' =>  'Spot_53' ,  'lat' => 38.959025, 'lon' => -77.454387, 'radius' => 50),
 'Spot_54'  => array ( 'name' =>  'Spot_54' ,  'lat' => 38.959025, 'lon' => -77.454387, 'radius' => 50),
 'Spot_55'  => array ( 'name' =>  'Spot_55' ,  'lat' => 38.959025, 'lon' => -77.454387, 'radius' => 50),
 'Spot_56'  => array ( 'name' =>  'Spot_56' ,  'lat' => 38.959025, 'lon' => -77.454387, 'radius' => 50),
 'Spot_57'  => array ( 'name' =>  'Spot_57' ,  'lat' => 38.957076, 'lon' => -77.453925, 'radius' => 50),
 'Spot_58'  => array ( 'name' =>  'Spot_58' ,  'lat' => 38.957076, 'lon' => -77.453925, 'radius' => 50),
 'Spot_59'  => array ( 'name' =>  'Spot_59' ,  'lat' => 38.957076, 'lon' => -77.453925, 'radius' => 50),
 'Spot_6'  => array ( 'name' =>  'Spot_6' ,  'lat' => 38.967571, 'lon' => -77.452232, 'radius' => 14),
 'Spot_60'  => array ( 'name' =>  'Spot_60' ,  'lat' => 38.952701, 'lon' => -77.441481, 'radius' => 16),
 'Spot_61'  => array ( 'name' =>  'Spot_61' ,  'lat' => 38.944539, 'lon' => -77.446323, 'radius' => 5),
 'Spot_62'  => array ( 'name' =>  'Spot_62' ,  'lat' => 38.9462, 'lon' => -77.447129, 'radius' => 5),
 'Spot_63'  => array ( 'name' =>  'Spot_63' ,  'lat' => 38.947756, 'lon' => -77.44667, 'radius' => 5),
 'Spot_64'  => array ( 'name' =>  'Spot_64' ,  'lat' => 38.949651, 'lon' => -77.44482, 'radius' => 5),
 'Spot_65'  => array ( 'name' =>  'Spot_65' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 18),
 'Spot_66'  => array ( 'name' =>  'Spot_66' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_67'  => array ( 'name' =>  'Spot_67' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_68'  => array ( 'name' =>  'Spot_68' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 18),
 'Spot_69'  => array ( 'name' =>  'Spot_69' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_7'  => array ( 'name' =>  'Spot_7' ,  'lat' => 38.969635, 'lon' => -77.449694, 'radius' => 18),
 'Spot_70'  => array ( 'name' =>  'Spot_70' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 18),
 'Spot_71'  => array ( 'name' =>  'Spot_71' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 18),
 'Spot_72'  => array ( 'name' =>  'Spot_72' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_73'  => array ( 'name' =>  'Spot_73' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 18),
 'Spot_74'  => array ( 'name' =>  'Spot_74' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 14),
 'Spot_8'  => array ( 'name' =>  'Spot_8' ,  'lat' => 38.967567, 'lon' => -77.451774, 'radius' => 14),
 'Spot_9'  => array ( 'name' =>  'Spot_9' ,  'lat' => 38.969045, 'lon' => -77.454997, 'radius' => 10),
 'testGG'  => array ( 'name' =>  'testGG' ,  'lat' => 38.95005, 'lon' => -77.44438, 'radius' => 50)

);

//Start the XML String
$outString = "<?xml version=\"1.0\" encoding=\"windows-1250\"?>\n<markers>\n";
$gatesString = "";
//Look at the list of a/c

$zdcctl=0;
$enoughAlready=0;

while ($enoughAlready < 1) {
    //$vatfile=(file("http://info.vroute.net/vatsim-data.txt"));
    //$vatfile=(file("http://vatsim-data.hardern.net/vatsim-data.txt"));
      $vatfile=(file("http://us.data.vatsim.net/vatsim-data.txt"));
      $zdc = array("KIAD", "KDCA", "KBWI");
      
      $outString = "<?xml version=\"1.0\" encoding=\"windows-1250\"?>\n<markers>\n";
      $DateModed = "<datemods><datemod mod=\"";
      $lineNum = 0;
      foreach ($vatfile as $dataline) {
          $iconz = "Default";
          $PColor = "#c8ccd0";
          $printWorthy = 0;
          if ($lineNum == 4){
              $dataline= substr ($dataline, 7, 16);
              $DateModed .= $dataline;
              $outString .= "<marker name=\"DATEMODED\" dest=\"$dataline\" lat=\"0\" lng=\"0\" flightdata=\"0\" type=\"0\" PColor=\"0\" HDG=\"0\" ACType=\"0\"/>\n";
              echo "\n$dataline\n";
          }
          $lineNum++;
          
          if (strpos($dataline,':PILOT:')!=0) {       
            $contdata=explode(':',$dataline);
          
            if (isAtKIAD($contdata[5], $contdata[6])&&$contdata[7]<500) {
               ///SPECIFIC FOR A/C ON THE GROUND AT KIAD
               //print_r($contdata);
               if ($contdata[11] =="") { echo "\n$contdata[0] has no Dept field\n";}
               if ($contdata[8]<2) {
                  if ($contdata[11] =="") {
                    $PColor = "#A37547";
                    $iconz = "OnGndKIADstoppedNoFP";
                  } else {
                    $PColor = "#ff0000";
                    $iconz = "OnGndKIADstopped";
                    /* Is the a/c at a gate??
                    foreach ($KIADGates as $value) {
                        if (isAtGate($value['lat'], $value['lon'],$contdata[5],$contdata[6]) <= $value['radius']) {
                           echo isAtGate($value['lat'], $value['lon'],$contdata[5],$contdata[6]) ." from a gate, specifically Gate ". $value['name'] ."\n";
                           //echo  array_keys($KIADGates[$value]) ."\n";
                           $gatesString .= "<gate name=\"".$value['name']."\" acCall=\"".$contdata[0]."\"/>\n";
                        }
                    }*/
                  }
               } else {
                  if ($contdata[11] == "KIAD") {
                    $PColor = "#FFFF00";
                    $iconz = "OnGndKIADtaxiingOut";
                  } else {
                    $PColor = "#002af0";
                    $iconz = "OnGndKIADtaxiingIn";
                  }
               }
               echo "$contdata[0] is at KIAD, alt = $contdata[7], speed = $contdata[8], (lat = $contdata[5], lon = $contdata[6]) \n";
  
               $printWorthy = 1;
               
            } elseif (in_array(substr($contdata[13],0,4),$zdc)) {
  
              $iconz = "Arrival";
              $PColor = "#002af0";
              if ($contdata[8]<50) { $PColor = "#FFFF00"; }  //Taxing
              echo "$contdata[0] = $iconz, speed = $contdata[8]\n";
              $printWorthy = 1;
           } elseif (in_array(substr($contdata[11],0,4),$zdc)) {
              $iconz = "Departure";
              $PColor = "#27c106";
              if ($contdata[8]<50) { $PColor = "#FFFF00"; }  //Taxing
              echo "$contdata[0] = $iconz, speed = $contdata[8]\n";
              $printWorthy = 1;
           } elseif (isInZDC ($contdata[5], $contdata[6])) {
              $iconz = "Transient";
              $PColor = "#333300";
              
              echo "$contdata[0] is $iconz (lat = $contdata[5], lon = $contdata[6])\n";
              //print_r($contdata);
              $printWorthy = 1;            
           } else {
              $printWorthy = 0;
           }
                
            if ($printWorthy) {
                $needle = strpos($contdata[9], "/");
                $ac = $contdata[9];
              if(!$needle) {
                $ac = $contdata[9];
              } elseif($needle < 2) {
                $ac = substr($contdata[9],2,4);
              } elseif($needle >= 4) {
                $ac = substr($contdata[9],0,4);
              } else { $ac = substr($contdata[9],$needle,4); }
                   //arrivals
                  $HDG = $contdata[38];
                   if ($HDG >= 315 or $HDG < 45) {
                       $iconz .= "N";
                   } elseif ($HDG >= 45 and $HDG < 135) {
                       $iconz .= "E";
                   } elseif ($HDG >= 135 and $HDG < 225) {
                       $iconz .= "S";
                   } elseif ($HDG >= 225 and $HDG < 315) {
                       $iconz .= "W";
                   } else {
                      $iconz = "Default";
                   }
                   //$iconz = "ArrivalN";
                   $outString .= "<marker name=\"$contdata[0]\" dest=\"$contdata[11] - $contdata[13]\" lat=\"$contdata[5]\" lng=\"$contdata[6]\" flightdata=\"$contdata[8]kts $contdata[7]ft\" type=\"$iconz\" PColor=\"$PColor\" HDG=\"$HDG\" ACType=\"$contdata[9]\"/>\n";
                   //echo "<tr><td><a href=\"http://www.vataware.com/pilot.cfm?cid=$contdata[1]\" target=\"_about\">$contdata[2]</a></td><td>$contdata[0]</td><td>$ac</td><td>$contdata[11]</td><td>$contdata[13]</td></tr>";
             } 
          }
      }
    $DateModed .= "\"/></datemods>";
    $outString .= $gatesString;
    $outString .= "</markers>\n";
    //$outString .= $DateModed;
echo $outString;
    $file = '/var/www/html/public/iadgates.xml';
    
    // Write the contents back to the file;
   file_put_contents($file, $outString, LOCK_EX);

    
    /*Set if want to get more then one per minute*/
    //sleep(20);
    $enoughAlready++;
    $vatfile ="";
    //echo "\n***$enoughAlready****\n";
    

}
function isInZDC ($longitude_x, $latitude_y) {
  $vertices_x = array(34.84218,35.36138,36.08671,37.33099,37.3033,37.47035,38.76632,39.16591,39.17086,39.36922,39.84961,39.87933,39.689,39.69745,39.4449,39.38429, 39.38954,39.59152,39.2577,39.62069,39.64762,39.65249,39.58915,39.57228,39.02618,38.53143,37.06305,35.44713,35.33281,33.12753,34.43293, 34.4381,34.8414);    // x-coordinates of the vertices of the polygon
  $vertices_y = array(-80.13043,-79.78922,-79.741, -80.63072,-80.74487,-80.83775,-80.56513,-80.3994,-79.89054,-79.53773,-77.93114,-77.15751,-77.16428,-77.35562,-77.1031,-76.81173,-76.34183,-76.02692,-75.83631,-74.98601,-74.77344,-74.45261,-74.48832,-74.18629,-73.64949,-73.97473,-74.54369,-74.87064,-75.16455,-76.9742,-78.72476,-79.31027,-79.88813); // y-coordinates of the vertices of the polygon
  $points_polygon = count($vertices_x) - 1;  // number vertices - zero-based array
  
  $i = $j = $c = 0;
  for ($i = 0, $j = $points_polygon ; $i < $points_polygon; $j = $i++) {
    if ( (($vertices_y[$i]  >  $latitude_y != ($vertices_y[$j] > $latitude_y)) &&
     ($longitude_x < ($vertices_x[$j] - $vertices_x[$i]) * ($latitude_y - $vertices_y[$i]) / ($vertices_y[$j] - $vertices_y[$i]) + $vertices_x[$i]) ) )
       $c = !$c;
  }

  if ($c){
    return true;
  } else {
    return false;
  }
}

function isAtKIAD ($longitude_x, $latitude_y) {
  $vertices_x = array(38.980,38.90,38.900,38.980);    // x-coordinates of the vertices of the polygon
  $vertices_y = array(-77.515,-77.515,-77.42, -77.42); // y-coordinates of the vertices of the polygon
  $points_polygon = count($vertices_x) - 1;  // number vertices - zero-based array
  
  $i = $j = $c = 0;
  for ($i = 0, $j = $points_polygon ; $i < $points_polygon; $j = $i++) {
    if ( (($vertices_y[$i]  >  $latitude_y != ($vertices_y[$j] > $latitude_y)) &&
     ($longitude_x < ($vertices_x[$j] - $vertices_x[$i]) * ($latitude_y - $vertices_y[$i]) / ($vertices_y[$j] - $vertices_y[$i]) + $vertices_x[$i]) ) )
       $c = !$c;
  }

  if ($c){
    return true;
  } else {
    return false;
  }
}

/**
 * Calculates the great-circle distance between two points, with
 * the Haversine formula.
 * @param float $latitudeFrom Latitude of start point in [deg decimal]
 * @param float $longitudeFrom Longitude of start point in [deg decimal]
 * @param float $latitudeTo Latitude of target point in [deg decimal]
 * @param float $longitudeTo Longitude of target point in [deg decimal]
 * @param float $earthRadius Mean earth radius in [m]
 * @return float Distance between points in [m] (same as earthRadius)
 */
function isAtGate ( $latitudeFrom, $longitudeFrom, $latitudeTo, $longitudeTo, $earthRadius = 6371000 )
{
  // convert from degrees to radians
  $latFrom = deg2rad($latitudeFrom);
  $lonFrom = deg2rad($longitudeFrom);
  $latTo = deg2rad($latitudeTo);
  $lonTo = deg2rad($longitudeTo);

  $latDelta = $latTo - $latFrom;
  $lonDelta = $lonTo - $lonFrom;

  $angle = 2 * asin(sqrt(pow(sin($latDelta / 2), 2) +
    cos($latFrom) * cos($latTo) * pow(sin($lonDelta / 2), 2)));
  return $angle * 6371000;
}

?>
